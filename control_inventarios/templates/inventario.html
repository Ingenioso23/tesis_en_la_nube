{% extends "base.html" %}

{% block content %}
  <h1>Inventario Actual</h1>
  <div class="table-container">
    <table class="inventario-table table dataTable">
      <thead>
        <tr>
          <th>Producto</th>
          <th>Cantidad Stock</th>
          <th>Entradas Totales</th>
          <th>Salidas Totales</th>
        </tr>
      </thead>
      <tbody>
        {% for producto in inventario %}
          <tr>
            <td>{{ producto.NombreProducto }}</td>
            <td>{{ producto.CantidadStock }}</td>
            <td>{{ producto.entradas_totales }}</td>
            <td>{{ producto.salidas_totales }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="export-links">
    <a href="{% url 'exportar_inventario' %}" class="export-link" id="export-excel">Exportar a Excel</a>
    
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.1.0/js/dataTables.buttons.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.html5.min.js"></script>

  <script>
    
    
    $(document).ready(function () {
      var table = $('.dataTable').DataTable({
        language: {
          url: "https://cdn.datatables.net/plug-ins/1.11.5/i18n/Spanish.json"
        }
      });
  

      $('#export-excel').on('click', function () {
        $('.dataTable').DataTable().buttons.exportData({ modifier: { search: 'none' } });
        $('.buttons-excel').trigger('click');
      });

      
    });
  </script>
{% endblock %}
